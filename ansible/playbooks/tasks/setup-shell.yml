---
# ============================================
# üñ•Ô∏è Shell Configuration
# ============================================
# Í∏∞Î≥∏ ÏóêÎîîÌÑ∞ Î∞è ÌîÑÎ°¨ÌîÑÌä∏ ÏÑ§Ï†ï

- name: Set 'vim' as the default system-wide editor
  ansible.builtin.command: update-alternatives --set editor /usr/bin/vim.basic
  changed_when: false
  become: true

- name: Set custom system-wide shell prompt (hostname only)
  ansible.builtin.blockinfile:
    path: /etc/bash.bashrc
    marker: '# {mark} ANSIBLE MANAGED BLOCK FOR CUSTOM PROMPT'
    block: |
      # Custom prompt for Lido CSM: inventory_hostname only
      PS1='${debian_chroot:+($debian_chroot)}\[\033[01;32m\]{{ inventory_hostname }}\[\033[00m\]:\[\033[01;34m\]\w\[\033[00m\]\$ '

- name: Create a script in profile.d to set the default editor
  ansible.builtin.copy:
    dest: '/etc/profile.d/defaults.sh'
    content: |
      export VISUAL=vim
      export EDITOR=vim
    mode: '0755'
